import { OrderDetailsUpdateModel } from './../../../shared/models/search.model';
import { Component, Input } from '@angular/core';
import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';
import { SchedulerService } from 'src/app/core/services/scheduler.service';

@Component({
  selector: 'order-edit',
  templateUrl: './order-edit.component.html',
})
export class OrderEditComponent {
  @Input() inputOrderInfo;
  orderDetailsUpdateModel: OrderDetailsUpdateModel;
  constructor(
    public activeModal: NgbActiveModal,
    private schedulerService: SchedulerService
  ) {}

  ngOnInit() {
    console.log(this.inputOrderInfo);
  }

  updateOrderDetails() {
    this.orderDetailsUpdateModel = new OrderDetailsUpdateModel();
    this.orderDetailsUpdateModel.Hours = this.inputOrderInfo.NoOfHours;
    this.orderDetailsUpdateModel.StartDate = this.inputOrderInfo.ScheduleStartDate;
    this.orderDetailsUpdateModel.EndDate = this.inputOrderInfo.scheduledFinish;
    this.orderDetailsUpdateModel.UnloadingPoint = this.inputOrderInfo.UnloadingPoint;
    this.orderDetailsUpdateModel.Comments = this.inputOrderInfo.Comments;
    this.orderDetailsUpdateModel.WorkOrderId = this.inputOrderInfo.workOrderId;
    this.schedulerService.updateOrderDetails(this.orderDetailsUpdateModel).subscribe(res => {
        this.activeModal.close('save');
    });
  }
}
