import { Component, OnInit, Input } from '@angular/core';
import { CrewCompositionUpdateModel } from './../../../shared/models/search.model';
import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';
import { SchedulerService } from 'src/app/core/services/scheduler.service';
import { NgxSpinnerService } from 'ngx-spinner';

@Component({
  selector: 'app-crew-work-event',
  templateUrl: './crew-work-event.component.html',
})
export class CrewWorkEventComponent implements OnInit {
  @Input() inputCrewCompositionInfo;
  dropDownData: any;
  isActive: boolean;
  crewCompositionUpdateModel: CrewCompositionUpdateModel;

  constructor(
    public activeModal: NgbActiveModal,
    private schedulerService: SchedulerService,
    private spinner: NgxSpinnerService
  ) { }

  ngOnInit(): void {
  }

  getDataForDropDowns() {
    this.schedulerService.getCrewType().subscribe(
      (res) => {
        this.dropDownData = res.dropdownDetails;
      }
    );
  }

  updateCrewCompositionInfo(){
    this.spinner.show();
    this.crewCompositionUpdateModel = new CrewCompositionUpdateModel();
    // this.crewUpdateModel.Active = this.isActive ? 1 : 0;
    // this.crewCompositionUpdateModel.employeeTypeId = this.inputCrewCompositionInfo.;
    // this.crewCompositionUpdateModel.WmcId = this.inputCrewCompositionInfo.id;
    // this.crewCompositionUpdateModel.HeadquarterId = this.inputCrewCompositionInfo.
    // this.crewCompositionUpdateModel.Hours = this.inputCrewCompositionInfo.
    // this.crewCompositionUpdateModel.TruckId = this.inputCrewCompositionInfo.
    // this.crewCompositionUpdateModel.StartDate = this.inputCrewCompositionInfo.
    // this.crewCompositionUpdateModel.StartTime = this.inputCrewCompositionInfo.
    // this.crewCompositionUpdateModel.EndTime = this.inputCrewCompositionInfo.
    
    this.schedulerService.updateCrewCompositionInfo(this.crewCompositionUpdateModel).subscribe(
      (res) => {
        console.log(res);
        this.activeModal.close('save');
        this.spinner.hide();
      }
    )
  }
}
